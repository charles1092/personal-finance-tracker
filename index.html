<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/recharts@2.8.0/esm/index.js" type="module"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .lucide { display: inline-block; }
        body { margin: 0; }
    </style>
</head>
<body>
    <div id="root">
        <div style="display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(to bottom right, #f8fafc, #dbeafe); font-family: system-ui, -apple-system, sans-serif;">
            <div style="text-center;">
                <div style="width: 40px; height: 40px; border: 4px solid #e5e7eb; border-left-color: #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
                <p style="color: #64748b;">Loading your finance tracker...</p>
            </div>
        </div>
    </div>

    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // Simple chart components without external dependencies
        const SimpleLineChart = ({ data, lines }) => {
            if (!data || data.length === 0) return <div className="text-center text-slate-500 py-8">No data to display</div>;
            
            const maxValue = Math.max(...data.flatMap(d => lines.map(line => d[line.key] || 0)));
            const minValue = Math.min(...data.flatMap(d => lines.map(line => d[line.key] || 0)));
            const range = maxValue - minValue || 1;
            
            return (
                <div className="relative bg-white p-4 rounded-lg">
                    <div className="flex justify-between text-xs text-slate-500 mb-2">
                        <span>${(minValue/1000).toFixed(0)}k</span>
                        <span>${(maxValue/1000).toFixed(0)}k</span>
                    </div>
                    <svg width="100%" height="200" className="border border-slate-200 rounded">
                        {lines.map((line, lineIndex) => {
                            const points = data.map((d, i) => {
                                const x = (i / (data.length - 1)) * 100;
                                const y = 100 - ((d[line.key] - minValue) / range) * 100;
                                return `${x},${y}`;
                            }).join(' ');
                            
                            return (
                                <polyline
                                    key={lineIndex}
                                    points={points}
                                    fill="none"
                                    stroke={line.color}
                                    strokeWidth="2"
                                    vectorEffect="non-scaling-stroke"
                                />
                            );
                        })}
                    </svg>
                    <div className="flex justify-between text-xs text-slate-600 mt-2">
                        <span>{data[0]?.month}</span>
                        <span>{data[data.length - 1]?.month}</span>
                    </div>
                </div>
            );
        };

        const SimpleBarChart = ({ data, barKey, color = "#f59e0b" }) => {
            if (!data || data.length === 0) return <div className="text-center text-slate-500 py-8">No data to display</div>;
            
            const maxValue = Math.max(...data.map(d => d[barKey] || 0));
            
            return (
                <div className="relative bg-white p-4 rounded-lg">
                    <div className="flex items-end space-x-1" style={{ height: '200px' }}>
                        {data.map((d, i) => {
                            const height = ((d[barKey] || 0) / maxValue) * 160;
                            return (
                                <div key={i} className="flex-1 flex flex-col items-center">
                                    <div 
                                        className="w-full rounded-t transition-all hover:opacity-80"
                                        style={{ 
                                            height: `${height}px`, 
                                            backgroundColor: color,
                                            minHeight: '2px'
                                        }}
                                        title={`${d.month}: $${d[barKey]?.toLocaleString()}`}
                                    />
                                    <span className="text-xs text-slate-600 mt-1 transform -rotate-45 origin-left">
                                        {d.month}
                                    </span>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        // Lucide Icons as React components
        const TrendingUp = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="22,7 13.5,15.5 8.5,10.5 2,17" />
                <polyline points="16,7 22,7 22,13" />
            </svg>
        );

        const DollarSign = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <line x1="12" y1="1" x2="12" y2="23" />
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
            </svg>
        );

        const Calendar = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
            </svg>
        );

        const Settings = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <circle cx="12" cy="12" r="3" />
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
            </svg>
        );

        const Plus = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
            </svg>
        );

        const Trash2 = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polyline points="3,6 5,6 21,6" />
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                <line x1="10" y1="11" x2="10" y2="17" />
                <line x1="14" y1="11" x2="14" y2="17" />
            </svg>
        );

        const Eye = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
            </svg>
        );

        const EyeOff = ({ size = 24, className = "", ...props }) => (
            <svg className={`lucide ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                <line x1="1" y1="1" x2="23" y2="23" />
            </svg>
        );

        const FinanceTracker = () => {
            // Load data from localStorage or use defaults
            const loadData = (key, defaultValue) => {
                try {
                    const saved = localStorage.getItem(key);
                    return saved ? JSON.parse(saved) : defaultValue;
                } catch {
                    return defaultValue;
                }
            };

            // Save data to localStorage
            const saveData = (key, data) => {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                } catch (error) {
                    console.error('Failed to save data:', error);
                }
            };

            // Core financial data state with persistence
            const [accounts, setAccountsInternal] = useState(() => loadData('accounts', {
                upBank: { balance: 0, lastUpdated: new Date().toISOString().slice(0, 10) },
                commBankPocket: { balance: 0, lastUpdated: new Date().toISOString().slice(0, 10) },
                commsec: { balance: 0, lastUpdated: new Date().toISOString().slice(0, 10) },
                stakeUSD: { balance: 0, lastUpdated: new Date().toISOString().slice(0, 10) }
            }));

            const setAccounts = (data) => {
                const newData = typeof data === 'function' ? data(accounts) : data;
                setAccountsInternal(newData);
                saveData('accounts', newData);
            };

            const [temporaryAssets, setTemporaryAssetsInternal] = useState(() => loadData('temporaryAssets', []));
            const setTemporaryAssets = (data) => {
                const newData = typeof data === 'function' ? data(temporaryAssets) : data;
                setTemporaryAssetsInternal(newData);
                saveData('temporaryAssets', newData);
            };

            const [income, setIncomeInternal] = useState(() => loadData('income', {
                monthlySalary: 0,
                payDate: 15,
                annualBonus: { amount: 0, month: 10, year: 2025, confirmed: false }
            }));

            const setIncome = (data) => {
                const newData = typeof data === 'function' ? data(income) : data;
                setIncomeInternal(newData);
                saveData('income', newData);
            };

            const [monthlyExpenses, setMonthlyExpensesInternal] = useState(() => loadData('monthlyExpenses', {
                rent: 0,
                utilities: 0,
                groceries: 0,
                transport: 0,
                entertainment: 0,
                other: 0
            }));

            const setMonthlyExpenses = (data) => {
                const newData = typeof data === 'function' ? data(monthlyExpenses) : data;
                setMonthlyExpensesInternal(newData);
                saveData('monthlyExpenses', newData);
            };

            const [scenarios, setScenariosInternal] = useState(() => loadData('scenarios', []));
            const setScenarios = (data) => {
                const newData = typeof data === 'function' ? data(scenarios) : data;
                setScenariosInternal(newData);
                saveData('scenarios', newData);
            };

            const [projectionMonths, setProjectionMonthsInternal] = useState(() => loadData('projectionMonths', 12));
            const setProjectionMonths = (data) => {
                setProjectionMonthsInternal(data);
                saveData('projectionMonths', data);
            };

            const [activeTab, setActiveTab] = useState('dashboard');

            // Calculate current totals
            const currentTotals = useMemo(() => {
                const accountsTotal = Object.values(accounts).reduce((sum, acc) => sum + acc.balance, 0);
                const tempAssetsTotal = temporaryAssets.reduce((sum, asset) => sum + asset.amount, 0);
                const totalNetWorth = accountsTotal + tempAssetsTotal;
                const liquidCash = accounts.upBank.balance;
                const investments = accountsTotal - liquidCash;
                
                return { totalNetWorth, liquidCash, investments, tempAssetsTotal };
            }, [accounts, temporaryAssets]);

            // Generate monthly projections
            const projections = useMemo(() => {
                const results = [];
                const today = new Date();
                let runningCash = accounts.upBank.balance;
                let runningInvestments = currentTotals.investments;
                
                const monthlyExpenseTotal = Object.values(monthlyExpenses).reduce((sum, exp) => sum + exp, 0);
                
                for (let i = 0; i <= projectionMonths; i++) {
                    const projDate = new Date(today.getFullYear(), today.getMonth() + i, 1);
                    const monthStr = projDate.toISOString().slice(0, 7);
                    
                    // Add monthly salary (on 15th)
                    runningCash += income.monthlySalary;
                    
                    // Subtract monthly expenses
                    runningCash -= monthlyExpenseTotal;
                    
                    // Apply scenarios for this month
                    const monthScenarios = scenarios.filter(s => 
                        s.enabled && s.date.startsWith(monthStr)
                    );
                    
                    monthScenarios.forEach(scenario => {
                        runningCash += scenario.amount;
                    });
                    
                    // Add annual bonus if applicable
                    if (income.annualBonus.month === projDate.getMonth() + 1 && 
                        income.annualBonus.year === projDate.getFullYear() && 
                        income.annualBonus.confirmed) {
                        runningCash += income.annualBonus.amount;
                    }
                    
                    // Assume excess cash gets invested (simplified)
                    if (runningCash > 5000) {
                        const excessCash = runningCash - 5000;
                        runningInvestments += excessCash * 0.8; // Invest 80% of excess
                        runningCash = 5000 + (excessCash * 0.2);
                    }
                    
                    const totalWealth = runningCash + runningInvestments + currentTotals.tempAssetsTotal;
                    
                    results.push({
                        month: projDate.toLocaleDateString('en-AU', { month: 'short', year: 'numeric' }),
                        cash: Math.round(runningCash),
                        investments: Math.round(runningInvestments),
                        total: Math.round(totalWealth),
                        availableForHouse: Math.round(runningCash + runningInvestments * 0.9) // Assume 90% of investments accessible
                    });
                }
                
                return results;
            }, [accounts, income, monthlyExpenses, scenarios, projectionMonths, currentTotals]);

            // Get current month cash flow
            const currentMonthFlow = useMemo(() => {
                const today = new Date();
                const currentMonth = today.toISOString().slice(0, 7);
                const monthlyExpenseTotal = Object.values(monthlyExpenses).reduce((sum, exp) => sum + exp, 0);
                
                const monthScenarios = scenarios.filter(s => 
                    s.enabled && s.date.startsWith(currentMonth)
                ).reduce((sum, s) => sum + s.amount, 0);
                
                return {
                    income: income.monthlySalary,
                    expenses: monthlyExpenseTotal,
                    scenarios: monthScenarios,
                    net: income.monthlySalary - monthlyExpenseTotal + monthScenarios
                };
            }, [income, monthlyExpenses, scenarios]);

            const updateAccount = (accountKey, balance) => {
                setAccounts(prev => ({
                    ...prev,
                    [accountKey]: { balance: parseFloat(balance) || 0, lastUpdated: new Date().toISOString().slice(0, 10) }
                }));
            };

            const addScenario = () => {
                const newId = Math.max(...scenarios.map(s => s.id), 0) + 1;
                setScenarios(prev => [...prev, {
                    id: newId,
                    description: "New Event",
                    amount: 0,
                    date: new Date().toISOString().slice(0, 10),
                    enabled: true
                }]);
            };

            const updateScenario = (id, field, value) => {
                setScenarios(prev => prev.map(s => 
                    s.id === id ? { ...s, [field]: field === 'amount' ? parseFloat(value) || 0 : value } : s
                ));
            };

            const deleteScenario = (id) => {
                setScenarios(prev => prev.filter(s => s.id !== id));
            };

            const addTemporaryAsset = () => {
                const newId = Math.max(...temporaryAssets.map(a => a.id), 0) + 1;
                setTemporaryAssets(prev => [...prev, {
                    id: newId,
                    description: "New temporary asset",
                    amount: 0,
                    returnDate: new Date().toISOString().slice(0, 10)
                }]);
            };

            const updateTemporaryAsset = (id, field, value) => {
                setTemporaryAssets(prev => prev.map(a => 
                    a.id === id ? { ...a, [field]: field === 'amount' ? parseFloat(value) || 0 : value } : a
                ));
            };

            const deleteTemporaryAsset = (id) => {
                setTemporaryAssets(prev => prev.filter(a => a.id !== id));
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="mb-8">
                            <h1 className="text-4xl font-bold text-slate-800 mb-2">Personal Finance Tracker</h1>
                            <p className="text-slate-600">Dynamic financial planning and wealth tracking</p>
                        </div>

                        {/* Navigation */}
                        <div className="flex space-x-1 mb-6 bg-white rounded-lg p-1 shadow-sm">
                            {[
                                { id: 'dashboard', label: 'Dashboard', icon: TrendingUp },
                                { id: 'accounts', label: 'Accounts', icon: DollarSign },
                                { id: 'planning', label: 'Planning', icon: Calendar },
                                { id: 'scenarios', label: 'Scenarios', icon: Settings },
                                { id: 'projections', label: 'Projections', icon: TrendingUp }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center space-x-2 px-4 py-2 rounded-md transition-all ${
                                        activeTab === tab.id 
                                            ? 'bg-blue-500 text-white shadow-sm' 
                                            : 'text-slate-600 hover:bg-slate-100'
                                    }`}
                                >
                                    <tab.icon size={16} />
                                    <span>{tab.label}</span>
                                </button>
                            ))}
                        </div>

                        {/* Dashboard Tab */}
                        {activeTab === 'dashboard' && (
                            <div className="space-y-6">
                                {/* Key Metrics */}
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between mb-2">
                                            <h3 className="text-sm font-medium text-slate-500">Total Net Worth</h3>
                                            <TrendingUp className="text-green-500" size={20} />
                                        </div>
                                        <p className="text-2xl font-bold text-slate-800">
                                            ${currentTotals.totalNetWorth.toLocaleString()}
                                        </p>
                                    </div>
                                    
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between mb-2">
                                            <h3 className="text-sm font-medium text-slate-500">Liquid Cash</h3>
                                            <DollarSign className="text-blue-500" size={20} />
                                        </div>
                                        <p className="text-2xl font-bold text-slate-800">
                                            ${currentTotals.liquidCash.toLocaleString()}
                                        </p>
                                    </div>
                                    
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between mb-2">
                                            <h3 className="text-sm font-medium text-slate-500">Investments</h3>
                                            <TrendingUp className="text-purple-500" size={20} />
                                        </div>
                                        <p className="text-2xl font-bold text-slate-800">
                                            ${currentTotals.investments.toLocaleString()}
                                        </p>
                                    </div>
                                    
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between mb-2">
                                            <h3 className="text-sm font-medium text-slate-500">Available for House</h3>
                                            <Calendar className="text-orange-500" size={20} />
                                        </div>
                                        <p className="text-2xl font-bold text-slate-800">
                                            ${projections[0]?.availableForHouse.toLocaleString() || '0'}
                                        </p>
                                    </div>
                                </div>

                                {/* Current Month Cash Flow */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">This Month's Cash Flow</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        <div className="text-center">
                                            <p className="text-sm text-slate-500">Income</p>
                                            <p className="text-xl font-bold text-green-600">+${currentMonthFlow.income.toLocaleString()}</p>
                                        </div>
                                        <div className="text-center">
                                            <p className="text-sm text-slate-500">Regular Expenses</p>
                                            <p className="text-xl font-bold text-red-600">-${currentMonthFlow.expenses.toLocaleString()}</p>
                                        </div>
                                        <div className="text-center">
                                            <p className="text-sm text-slate-500">One-off Events</p>
                                            <p className={`text-xl font-bold ${currentMonthFlow.scenarios >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                                                {currentMonthFlow.scenarios >= 0 ? '+' : ''}${currentMonthFlow.scenarios.toLocaleString()}
                                            </p>
                                        </div>
                                        <div className="text-center">
                                            <p className="text-sm text-slate-500">Net Flow</p>
                                            <p className={`text-xl font-bold ${currentMonthFlow.net >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                                                {currentMonthFlow.net >= 0 ? '+' : ''}${currentMonthFlow.net.toLocaleString()}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Wealth Projection Chart */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">Wealth Projection (Next 12 Months)</h3>
                                    <SimpleLineChart 
                                        data={projections.slice(0, 13)}
                                        lines={[
                                            { key: 'total', color: '#3b82f6' },
                                            { key: 'availableForHouse', color: '#f59e0b' }
                                        ]}
                                    />
                                    <div className="flex justify-center space-x-6 mt-4 text-sm">
                                        <div className="flex items-center space-x-2">
                                            <div className="w-3 h-3 bg-blue-500 rounded"></div>
                                            <span>Total Wealth</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <div className="w-3 h-3 bg-orange-500 rounded"></div>
                                            <span>Available for House</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Accounts Tab */}
                        {activeTab === 'accounts' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">Account Balances</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        {Object.entries(accounts).map(([key, account]) => (
                                            <div key={key} className="space-y-2">
                                                <label className="block text-sm font-medium text-slate-700">
                                                    {key === 'upBank' ? 'Up Bank (Cash)' : 
                                                     key === 'commBankPocket' ? 'CommBank Pocket (ETFs)' :
                                                     key === 'commsec' ? 'Commsec (Shares)' : 'Stake (USD ETFs)'}
                                                </label>
                                                <div className="flex space-x-2">
                                                    <input
                                                        type="number"
                                                        value={account.balance}
                                                        onChange={(e) => updateAccount(key, e.target.value)}
                                                        className="flex-1 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                                        placeholder="0"
                                                    />
                                                    <span className="px-3 py-2 text-sm text-slate-500 bg-slate-50 rounded-md">
                                                        Updated: {account.lastUpdated}
                                                    </span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Temporary Assets */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold text-slate-800">Temporary Assets & Money Owed</h3>
                                        <button
                                            onClick={addTemporaryAsset}
                                            className="flex items-center space-x-2 px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"
                                        >
                                            <Plus size={16} />
                                            <span>Add Asset</span>
                                        </button>
                                    </div>
                                    
                                    <div className="space-y-3">
                                        {temporaryAssets.map(asset => (
                                            <div key={asset.id} className="flex space-x-3 items-center p-3 bg-slate-50 rounded-lg">
                                                <input
                                                    type="text"
                                                    value={asset.description}
                                                    onChange={(e) => updateTemporaryAsset(asset.id, 'description', e.target.value)}
                                                    className="flex-1 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                                    placeholder="Description"
                                                />
                                                <input
                                                    type="number"
                                                    value={asset.amount}
                                                    onChange={(e) => updateTemporaryAsset(asset.id, 'amount', e.target.value)}
                                                    className="w-32 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                                    placeholder="Amount"
                                                />
                                                <input
                                                    type="date"
                                                    value={asset.returnDate}
                                                    onChange={(e) => updateTemporaryAsset(asset.id, 'returnDate', e.target.value)}
                                                    className="w-40 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                                />
                                                <button
                                                    onClick={() => deleteTemporaryAsset(asset.id)}
                                                    className="p-2 text-red-500 hover:bg-red-50 rounded-md"
                                                >
                                                    <Trash2 size={16} />
                                                </button>
                                            </div>
                                        ))}
                                        
                                        {temporaryAssets.length === 0 && (
                                            <p className="text-slate-500 text-center py-4">No temporary assets added yet</p>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Planning Tab */}
                        {activeTab === 'planning' && (
                            <div className="space-y-6">
                                {/* Income Configuration */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">Income Configuration</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Monthly Salary</label>
                                            <input
                                                type="number"
                                                value={income.monthlySalary}
                                                onChange={(e) => setIncome(prev => ({ ...prev, monthlySalary: parseFloat(e.target.value) || 0 }))}
                                                className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Annual Bonus</label>
                                            <input
                                                type="number"
                                                value={income.annualBonus.amount}
                                                onChange={(e) => setIncome(prev => ({ 
                                                    ...prev, 
                                                    annualBonus: { ...prev.annualBonus, amount: parseFloat(e.target.value) || 0 }
                                                }))}
                                                className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Bonus Confirmed?</label>
                                            <select
                                                value={income.annualBonus.confirmed}
                                                onChange={(e) => setIncome(prev => ({ 
                                                    ...prev, 
                                                    annualBonus: { ...prev.annualBonus, confirmed: e.target.value === 'true' }
                                                }))}
                                                className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                            >
                                                <option value="false">No</option>
                                                <option value="true">Yes</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Monthly Expenses */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">Monthly Expenses</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        {Object.entries(monthlyExpenses).map(([key, value]) => (
                                            <div key={key}>
                                                <label className="block text-sm font-medium text-slate-700 mb-2 capitalize">
                                                    {key}
                                                </label>
                                                <input
                                                    type="number"
                                                    value={value}
                                                    onChange={(e) => setMonthlyExpenses(prev => ({ 
                                                        ...prev, 
                                                        [key]: parseFloat(e.target.value) || 0 
                                                    }))}
                                                    className="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                                />
                                            </div>
                                        ))}
                                    </div>
                                    <div className="mt-4 p-3 bg-slate-50 rounded-lg">
                                        <p className="text-sm text-slate-600">
                                            Total Monthly Expenses: <span className="font-semibold">
                                                ${Object.values(monthlyExpenses).reduce((sum, exp) => sum + exp, 0).toLocaleString()}
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Scenarios Tab */}
                        {activeTab === 'scenarios' && (
                            <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-semibold text-slate-800">One-off Events & Scenarios</h3>
                                    <button
                                        onClick={addScenario}
                                        className="flex items-center space-x-2 px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"
                                    >
                                        <Plus size={16} />
                                        <span>Add Scenario</span>
                                    </button>
                                </div>
                                
                                <div className="space-y-3">
                                    {scenarios.map(scenario => (
                                        <div key={scenario.id} className="flex space-x-3 items-center p-3 bg-slate-50 rounded-lg">
                                            <button
                                                onClick={() => updateScenario(scenario.id, 'enabled', !scenario.enabled)}
                                                className={`p-2 rounded-md ${scenario.enabled ? 'text-green-600 bg-green-50' : 'text-slate-400 bg-slate-100'}`}
                                            >
                                                {scenario.enabled ? <Eye size={16} /> : <EyeOff size={16} />}
                                            </button>
                                            <input
                                                type="text"
                                                value={scenario.description}
                                                onChange={(e) => updateScenario(scenario.id, 'description', e.target.value)}
                                                className="flex-1 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                                placeholder="Event description"
                                            />
                                            <input
                                                type="number"
                                                value={scenario.amount}
                                                onChange={(e) => updateScenario(scenario.id, 'amount', e.target.value)}
                                                className="w-32 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                                placeholder="Amount"
                                            />
                                            <input
                                                type="date"
                                                value={scenario.date}
                                                onChange={(e) => updateScenario(scenario.id, 'date', e.target.value)}
                                                className="w-40 px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                            />
                                            <button
                                                onClick={() => deleteScenario(scenario.id)}
                                                className="p-2 text-red-500 hover:bg-red-50 rounded-md"
                                            >
                                                <Trash2 size={16} />
                                            </button>
                                        </div>
                                    ))}
                                    
                                    {scenarios.length === 0 && (
                                        <p className="text-slate-500 text-center py-4">No scenarios added yet</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Projections Tab */}
                        {activeTab === 'projections' && (
                            <div className="space-y-6">
                                {/* Projection Controls */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold text-slate-800">Projection Settings</h3>
                                        <div className="flex items-center space-x-2">
                                            <label className="text-sm font-medium text-slate-700">Months to project:</label>
                                            <select
                                                value={projectionMonths}
                                                onChange={(e) => setProjectionMonths(parseInt(e.target.value))}
                                                className="px-3 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                            >
                                                <option value="6">6 months</option>
                                                <option value="12">12 months</option>
                                                <option value="18">18 months</option>
                                                <option value="24">24 months</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                {/* Wealth Projection Chart */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">Wealth Projection</h3>
                                    <SimpleLineChart 
                                        data={projections}
                                        lines={[
                                            { key: 'cash', color: '#10b981' },
                                            { key: 'investments', color: '#8b5cf6' },
                                            { key: 'total', color: '#3b82f6' }
                                        ]}
                                    />
                                    <div className="flex justify-center space-x-6 mt-4 text-sm">
                                        <div className="flex items-center space-x-2">
                                            <div className="w-3 h-3 bg-green-500 rounded"></div>
                                            <span>Cash</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <div className="w-3 h-3 bg-purple-500 rounded"></div>
                                            <span>Investments</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <div className="w-3 h-3 bg-blue-500 rounded"></div>
                                            <span>Total Wealth</span>
                                        </div>
                                    </div>
                                </div>

                                {/* House Deposit Availability */}
                                <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-4">Available for House Deposit</h3>
                                    <SimpleBarChart 
                                        data={projections.filter((_, i) => i % 2 === 0)}
                                        barKey="availableForHouse"
                                        color="#f59e0b"
                                    />
                                    
                                    <div className="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div className="text-center p-3 bg-orange-50 rounded-lg">
                                            <p className="text-sm text-slate-600">In 6 months</p>
                                            <p className="text-xl font-bold text-orange-600">
                                                ${projections[6]?.availableForHouse.toLocaleString() || '0'}
                                            </p>
                                        </div>
                                        <div className="text-center p-3 bg-orange-50 rounded-lg">
                                            <p className="text-sm text-slate-600">In 12 months</p>
                                            <p className="text-xl font-bold text-orange-600">
                                                ${projections[12]?.availableForHouse.toLocaleString() || '0'}
                                            </p>
                                        </div>
                                        <div className="text-center p-3 bg-orange-50 rounded-lg">
                                            <p className="text-sm text-slate-600">In 18 months</p>
                                            <p className="text-xl font-bold text-orange-600">
                                                ${projections[18]?.availableForHouse.toLocaleString() || '0'}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Wait for page to load before rendering
        document.addEventListener('DOMContentLoaded', () => {
            ReactDOM.render(<FinanceTracker />, document.getElementById('root'));
        });
    </script>
</body>
</html>
